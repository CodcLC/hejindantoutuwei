{"version":3,"sources":["assets\\Script\\control\\touchStage.js"],"names":["cc","Class","Component","properties","canvas","Node","onLoad","game","touchDown","node","on","EventType","TOUCH_START","on_touch_start","TOUCH_END","on_touch_end","sys","os","OS_ANDROID","OS_IOS","TOUCH_MOVE","on_touch_move","touchPos","v2","onDestroy","off","touch","pos","getLocation","pos1","convertToNodeSpaceAR","x","y","emit","on_mouse_move","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        canvas: cc.Node\r\n    },\r\n    onLoad() {\r\n        game.touchDown = false;\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.on_touch_start, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.on_touch_end, this);\r\n        if (cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS) { //ANDROID IOS\r\n            this.node.on(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n        } else {\r\n            this.node.on(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n            //this.node.on(cc.Node.EventType.MOUSE_MOVE, this.on_mouse_move, this);\r\n        }\r\n        this.touchPos = cc.v2();\r\n    },\r\n    onDestroy() {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.on_touch_start, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END, this.on_touch_end, this);\r\n        if (cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS) { //ANDROID IOS\r\n            this.node.off(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n        } else {\r\n            this.node.off(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n            //this.node.off(cc.Node.EventType.MOUSE_MOVE, this.on_mouse_move, this);\r\n        }\r\n    },\r\n    //屏幕按下\r\n    on_touch_start(touch) {\r\n        var pos = touch.getLocation();\r\n        var pos1 = this.node.convertToNodeSpaceAR(pos);\r\n        this.touchPos.x = (pos1.x + this.canvas.x);\r\n        this.touchPos.y = (pos1.y + this.canvas.y);\r\n        game.emit(\"stage.touch\", this.touchPos);\r\n        game.touchDown = true;\r\n    },\r\n    on_touch_end(touch) {\r\n        game.touchDown = false;\r\n    },\r\n    on_mouse_move(touch) {\r\n        var pos = touch.getLocation();\r\n        var pos1 = this.node.convertToNodeSpaceAR(pos);\r\n        this.touchPos.x = (pos1.x + this.canvas.x);\r\n        this.touchPos.y = (pos1.y + this.canvas.y);\r\n        game.emit(\"stage.touch\", this.touchPos);\r\n    },\r\n    on_touch_move(touch) {\r\n        var pos = touch.getLocation();\r\n        var pos1 = this.node.convertToNodeSpaceAR(pos);\r\n        this.touchPos.x = (pos1.x + this.canvas.x);\r\n        this.touchPos.y = (pos1.y + this.canvas.y);\r\n        game.emit(\"stage.touch\", this.touchPos);\r\n    },\r\n    start() {\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}