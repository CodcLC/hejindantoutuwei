{"version":3,"sources":["assets\\Script\\blow\\bomb1.js"],"names":["PoolComponent","require","cc","Class","properties","onLoad","unuse","reuse","data","game","soundManager","playEffect","gameSound","dao_dan_bao_zha","init","group","node","angle","x","v","y","animation","getComponent","Animation","_isinit","spriteFrames","gameUtils","getSpriteFrames","bomb_atlas","aniName","flashClip","AnimationClip","createWithSpriteFrames","name","wrapMode","WrapMode","Normal","addClip","play","playAdditive","once","pool","put","removeFromParent","destroy","bind","start","onDestroy"],"mappings":";;;;;;AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B,EAA8C;;;AAC9CC,EAAE,CAACC,KAAH,CAAS;AACL,aAASH,aADJ;AAELI,EAAAA,UAAU,EAAE,EAFP;AAGLC,EAAAA,MAHK,oBAGI,CACR,CAJI;AAKL;AACAC,EAAAA,KAAK,EAAE,iBAAY,CAClB,CAPI;AAQL;AACAC,EAAAA,KAAK,EAAE,eAAUC,IAAV,EAAgB;AACnBC,IAAAA,IAAI,CAACC,YAAL,CAAkBC,UAAlB,CAA6BF,IAAI,CAACG,SAAL,CAAeC,eAA5C,EAA4D,KAA5D;AACA,SAAKC,IAAL,CAAUN,IAAV;AACH,GAZI;AAaLM,EAAAA,IAbK,gBAaAN,IAbA,EAaM;AACP,QAAIA,IAAI,CAACO,KAAT,EAAgB,KAAKC,IAAL,CAAUD,KAAV,GAAkBP,IAAI,CAACO,KAAvB;AAChB,SAAKC,IAAL,CAAUC,KAAV,GAAkBT,IAAI,CAACS,KAAvB;AACA,SAAKD,IAAL,CAAUE,CAAV,GAAcV,IAAI,CAACW,CAAL,CAAOD,CAArB;AACA,SAAKF,IAAL,CAAUI,CAAV,GAAcZ,IAAI,CAACW,CAAL,CAAOC,CAArB,CAJO,CAKP;;AACA,QAAIC,SAAS,GAAG,KAAKL,IAAL,CAAUM,YAAV,CAAuBpB,EAAE,CAACqB,SAA1B,CAAhB,CANO,CAM8C;;AACrD,QAAI,CAAC,KAAKC,OAAV,EAAmB;AACf,UAAIC,YAAY,GAAGhB,IAAI,CAACiB,SAAL,CAAeC,eAAf,CAA+BlB,IAAI,CAACmB,UAApC,EAAgDpB,IAAI,CAACqB,OAArD,CAAnB;AACA,UAAIC,SAAS,GAAG5B,EAAE,CAAC6B,aAAH,CAAiBC,sBAAjB,CAAwCP,YAAxC,EAAsD,EAAtD,CAAhB;AACAK,MAAAA,SAAS,CAACG,IAAV,GAAiB,KAAjB;AACAH,MAAAA,SAAS,CAACI,QAAV,GAAqBhC,EAAE,CAACiC,QAAH,CAAYC,MAAjC;AACAf,MAAAA,SAAS,CAACgB,OAAV,CAAkBP,SAAlB;AACAT,MAAAA,SAAS,CAACiB,IAAV,CAAe,KAAf;AACH,KAPD,MAQK;AACDjB,MAAAA,SAAS,CAACkB,YAAV,CAAuB,KAAvB,EAA8B,CAA9B;AACH;;AACDlB,IAAAA,SAAS,CAACmB,IAAV,CAAe,UAAf,EAA2B,YAAY;AACnC,UAAIC,IAAI,GAAG,KAAKzB,IAAL,CAAUyB,IAArB;;AACA,UAAIA,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACC,GAAL,CAAS,KAAK1B,IAAd;AACH,OAFD,MAGK;AACD,aAAKA,IAAL,CAAU2B,gBAAV,CAA2B,IAA3B;AACA,aAAK3B,IAAL,CAAU4B,OAAV;AACH;AACJ,KAT0B,CASzBC,IATyB,CASpB,IAToB,CAA3B;AAUH,GAzCI;AA0CLC,EAAAA,KA1CK,mBA0CG,CACP,CA3CI;AA4CLC,EAAAA,SA5CK,uBA4CO,CACX,CA7CI,CA8CL;;AA9CK,CAAT","sourceRoot":"/","sourcesContent":["let PoolComponent = require(\"PoolComponent\"); //池子组件\r\ncc.Class({\r\n    extends: PoolComponent,\r\n    properties: {},\r\n    onLoad() {\r\n    },\r\n    //回收\r\n    unuse: function () {\r\n    },\r\n    //重用\r\n    reuse: function (data) {\r\n        game.soundManager.playEffect(game.gameSound.dao_dan_bao_zha,false);\r\n        this.init(data);\r\n    },\r\n    init(data) {\r\n        if (data.group) this.node.group = data.group;\r\n        this.node.angle = data.angle;\r\n        this.node.x = data.v.x;\r\n        this.node.y = data.v.y;\r\n        //结束动画\r\n        let animation = this.node.getComponent(cc.Animation);//动画组件\r\n        if (!this._isinit) {\r\n            let spriteFrames = game.gameUtils.getSpriteFrames(game.bomb_atlas, data.aniName);\r\n            let flashClip = cc.AnimationClip.createWithSpriteFrames(spriteFrames, 20);\r\n            flashClip.name = 'end';\r\n            flashClip.wrapMode = cc.WrapMode.Normal;\r\n            animation.addClip(flashClip);\r\n            animation.play('end');\r\n        }\r\n        else {\r\n            animation.playAdditive('end', 0);\r\n        }\r\n        animation.once(\"finished\", function () {\r\n            let pool = this.node.pool;\r\n            if (pool) {\r\n                pool.put(this.node);\r\n            }\r\n            else {\r\n                this.node.removeFromParent(true);\r\n                this.node.destroy();\r\n            }\r\n        }.bind(this))\r\n    },\r\n    start() {\r\n    },\r\n    onDestroy() {\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}