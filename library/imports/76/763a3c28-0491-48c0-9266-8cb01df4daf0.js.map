{"version":3,"sources":["assets\\Script\\enemy\\enemyHp.js"],"names":["HpComponent","require","cc","Class","properties","progressBar","ProgressBar","onHurt","value","curHp","isShow","node","opacity","showTime","updateBar","emit","parent","onDestroy","onLoad","y","unuse","reuse","data","totalHp","hp","zy","progress","format","onCollisionEnter","other","self","hurt","getComponent","hurtValue","end","onCollisionStay","onCollisionExit","update","dt"],"mappings":";;;;;;AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB,EAA0C;;;AAC1CC,EAAE,CAACC,KAAH,CAAS;AACL,aAASH,WADJ;AAELI,EAAAA,UAAU,EAAE;AACRC,IAAAA,WAAW,EAAEH,EAAE,CAACI;AADR,GAFP;AAKL;AACAC,EAAAA,MANK,kBAMEC,KANF,EAMS;AACV,SAAKC,KAAL,IAAcD,KAAd;AACA,SAAKE,MAAL,GAAc,IAAd;AACA,SAAKL,WAAL,CAAiBM,IAAjB,CAAsBC,OAAtB,GAAgC,GAAhC;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,SAAL;;AACA,QAAI,KAAKL,KAAL,IAAc,CAAlB,EAAqB;AACjB,WAAKE,IAAL,CAAUI,IAAV,CAAe,OAAf;AACA,WAAKC,MAAL,CAAYD,IAAZ,CAAiB,OAAjB;AACH;AACJ,GAhBI;AAiBLE,EAAAA,SAjBK,uBAiBO,CACX,CAlBI;AAmBLC,EAAAA,MAnBK,oBAmBI;AACL,SAAKC,CAAL,GAAS,KAAKd,WAAL,CAAiBM,IAAjB,CAAsBQ,CAA/B;AACH,GArBI;AAsBLC,EAAAA,KAAK,EAAE,iBAAY,CAClB,CAvBI;AAwBLC,EAAAA,KAAK,EAAE,eAAUC,IAAV,EAAgB;AACnB,SAAKC,OAAL,GAAe,KAAKd,KAAL,GAAaa,IAAI,CAACE,EAAjC,CADmB,CACkB;;AACrC,SAAKV,SAAL;AACA,SAAKD,QAAL,GAAgB,CAAhB;AACA,SAAKH,MAAL,GAAc,KAAd;AACA,SAAKL,WAAL,CAAiBM,IAAjB,CAAsBC,OAAtB,GAAgC,CAAhC;AACA,SAAKP,WAAL,CAAiBM,IAAjB,CAAsBQ,CAAtB,GAA2B,KAAKA,CAAL,GAASG,IAAI,CAACG,EAAzC;AACH,GA/BI;AAgCLX,EAAAA,SAhCK,uBAgCO;AACR,QAAIY,QAAQ,GAAG,CAAC,KAAKjB,KAAL,GAAa,KAAKc,OAAnB,EAA4BI,MAA5B,EAAf;AACA,SAAKtB,WAAL,CAAiBqB,QAAjB,GAA4BA,QAA5B;AACH,GAnCI;AAoCL;AACAE,EAAAA,gBAAgB,EAAE,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,QAAIC,IAAI,GAAGF,KAAK,CAAClB,IAAN,CAAWqB,YAAX,CAAwB,MAAxB,CAAX;AACA,QAAI,CAACD,IAAD,IAASA,IAAI,CAACE,SAAL,IAAkB,CAA/B,EAAkC;AAClC,SAAKxB,KAAL,IAAcsB,IAAI,CAACE,SAAnB;AACAF,IAAAA,IAAI,CAACG,GAAL;AACA,SAAKxB,MAAL,GAAc,IAAd;AACA,SAAKL,WAAL,CAAiBM,IAAjB,CAAsBC,OAAtB,GAAgC,GAAhC;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,SAAL;;AACA,QAAI,KAAKL,KAAL,IAAc,CAAlB,EAAqB;AACjB,WAAKE,IAAL,CAAUI,IAAV,CAAe,OAAf;AACH;AACJ,GAjDI;AAkDLoB,EAAAA,eAAe,EAAE,yBAAUN,KAAV,EAAiBC,IAAjB,EAAuB,CACvC,CAnDI;AAoDL;AACAM,EAAAA,eAAe,EAAE,yBAAUP,KAAV,EAAiBC,IAAjB,EAAuB,CACpC;AACH,GAvDI;AAwDLO,EAAAA,MAxDK,kBAwDEC,EAxDF,EAwDM;AACP,SAAKzB,QAAL,IAAiByB,EAAjB;;AACA,QAAI,KAAK5B,MAAL,IAAe,KAAKG,QAAL,GAAgB,CAAnC,EAAsC;AAClC,WAAKH,MAAL,GAAc,KAAd;AACA,WAAKL,WAAL,CAAiBM,IAAjB,CAAsBC,OAAtB,GAAgC,CAAhC;AACH;AACJ;AA9DI,CAAT","sourceRoot":"/","sourcesContent":["let HpComponent = require(\"hpComponent\"); //池子组件\r\ncc.Class({\r\n    extends: HpComponent,\r\n    properties: {\r\n        progressBar: cc.ProgressBar\r\n    },\r\n    //受到的伤害\r\n    onHurt(value) {\r\n        this.curHp -= value;\r\n        this.isShow = true;\r\n        this.progressBar.node.opacity = 255;\r\n        this.showTime = 0;\r\n        this.updateBar();\r\n        if (this.curHp <= 0) {\r\n            this.node.emit(\"death\");\r\n            this.parent.emit(\"death\");\r\n        }\r\n    },\r\n    onDestroy() {\r\n    },\r\n    onLoad() {\r\n        this.y = this.progressBar.node.y;\r\n    },\r\n    unuse: function () {\r\n    },\r\n    reuse: function (data) {\r\n        this.totalHp = this.curHp = data.hp; //数据配置\r\n        this.updateBar();\r\n        this.showTime = 0;\r\n        this.isShow = false;\r\n        this.progressBar.node.opacity = 0;\r\n        this.progressBar.node.y = (this.y + data.zy);\r\n    },\r\n    updateBar() {\r\n        var progress = (this.curHp / this.totalHp).format();\r\n        this.progressBar.progress = progress;\r\n    },\r\n    //碰撞检测到\r\n    onCollisionEnter: function (other, self) {\r\n        var hurt = other.node.getComponent(\"hurt\");\r\n        if (!hurt || hurt.hurtValue == 0) return;\r\n        this.curHp -= hurt.hurtValue;\r\n        hurt.end();\r\n        this.isShow = true;\r\n        this.progressBar.node.opacity = 255;\r\n        this.showTime = 0;\r\n        this.updateBar();\r\n        if (this.curHp <= 0) {\r\n            this.node.emit(\"death\");\r\n        }\r\n    },\r\n    onCollisionStay: function (other, self) {\r\n    },\r\n    //碰撞退出\r\n    onCollisionExit: function (other, self) {\r\n        // cc.log(\"碰撞退出\")\r\n    },\r\n    update(dt) {\r\n        this.showTime += dt;\r\n        if (this.isShow && this.showTime > 2) {\r\n            this.isShow = false;\r\n            this.progressBar.node.opacity = 0;\r\n        }\r\n    },\r\n});\r\n"]}