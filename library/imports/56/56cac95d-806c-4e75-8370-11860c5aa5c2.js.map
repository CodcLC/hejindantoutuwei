{"version":3,"sources":["assets\\Script\\factory\\enemyFactory.js"],"names":["cc","Class","Component","properties","bingTime","onDestroy","onLoad","fff","nextBin","parent","node","bingPos","convertToWorldSpaceAR","v2","gameConfig","require","game","guanKaInfo","config","bingList","i","opts","j","count","push","length","sort","a","b","c","parseInt","Math","random","start","update","dt","isOver","isDeath","bing","shift","data","emit"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAELC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAE,EADF,CACM;;AADN,GAFP;AAKLC,EAAAA,SALK,uBAKO,CACR;AACH,GAPI;AAQLC,EAAAA,MARK,oBAQI;AACL,SAAKC,GAAL,GAAW,IAAX;AACA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKC,MAAL,GAAc,KAAKC,IAAL,CAAUD,MAAxB;AACA,SAAKE,OAAL,GAAe,KAAKD,IAAL,CAAUE,qBAAV,CAAgCZ,EAAE,CAACa,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhC,CAAf;;AACA,QAAIC,UAAU,GAAGC,OAAO,CAACC,IAAI,CAACC,UAAN,CAAxB;;AACA,SAAKC,MAAL,GAAcJ,UAAd;AACA,SAAKK,QAAL,GAAgB,EAAhB;;AACA,SAAK,IAAIC,CAAT,IAAcN,UAAd,EAA0B;AACtB,UAAIO,IAAI,GAAGP,UAAU,CAACM,CAAD,CAArB;;AACA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,KAAzB,EAAgCD,CAAC,EAAjC,EAAqC;AACjC,aAAKH,QAAL,CAAcK,IAAd,CAAmBJ,CAAnB;AACH;AACJ;;AACD,QAAIK,MAAM,GAAG,KAAKN,QAAL,CAAcM,MAA3B;AACA,SAAKN,QAAL,CAAcO,IAAd,CAAmB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC/B,UAAIC,CAAC,GAAGC,QAAQ,CAACC,IAAI,CAACC,MAAL,KAAgBP,MAAhB,GAAyBA,MAAM,GAAG,CAAnC,CAAhB;AACA,aAAOI,CAAP;AACH,KAHD;AAIH,GA3BI;AA4BLI,EAAAA,KA5BK,mBA4BG,CACP,CA7BI;AA8BLC,EAAAA,MA9BK,kBA8BEC,EA9BF,EA8BM;AACP,QAAInB,IAAI,CAACoB,MAAT,EAAiB;AACjB,QAAI,KAAK3B,MAAL,CAAY4B,OAAhB,EAAyB;AACzB,SAAK7B,OAAL,IAAgB2B,EAAhB;;AACA,QAAI,KAAK3B,OAAL,GAAe,KAAKJ,QAAxB,EAAkC;AAC9B;AACH;;AACD,SAAKI,OAAL,GAAe,CAAf;AACA,QAAI8B,IAAI,GAAG,KAAKnB,QAAL,CAAcoB,KAAd,EAAX;AACA,SAAKpB,QAAL,CAAcK,IAAd,CAAmBc,IAAnB;AACA,QAAIE,IAAI,GAAG,KAAKtB,MAAL,CAAYoB,IAAZ,CAAX;;AACA,QAAI,KAAK/B,GAAT,EAAc;AACV;AACAS,MAAAA,IAAI,CAACyB,IAAL,CAAU,SAAV,EAAqBH,IAArB,EAA2B,KAAK3B,OAAhC,EAAyC6B,IAAzC;AACH;AACJ;AA7CI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        bingTime: 10, //每隔5秒出一个军官\r\n    },\r\n    onDestroy() {\r\n        //clearInterval(this.makeJunGuan)\r\n    },\r\n    onLoad() {\r\n        this.fff = true;\r\n        this.nextBin = 0;\r\n        this.parent = this.node.parent;\r\n        this.bingPos = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        let gameConfig = require(game.guanKaInfo);\r\n        this.config = gameConfig;\r\n        this.bingList = [];\r\n        for (let i in gameConfig) {\r\n            let opts = gameConfig[i];\r\n            for (let j = 0; j < opts.count; j++) {\r\n                this.bingList.push(i);\r\n            }\r\n        }\r\n        let length = this.bingList.length;\r\n        this.bingList.sort(function (a, b) {\r\n            let c = parseInt(Math.random() * length - length / 2);\r\n            return c;\r\n        })\r\n    },\r\n    start() {\r\n    },\r\n    update(dt) {\r\n        if (game.isOver) return;\r\n        if (this.parent.isDeath) return;\r\n        this.nextBin += dt;\r\n        if (this.nextBin < this.bingTime) {\r\n            return;\r\n        }\r\n        this.nextBin = 0;\r\n        let bing = this.bingList.shift();\r\n        this.bingList.push(bing);\r\n        let data = this.config[bing];\r\n        if (this.fff) {\r\n            // this.fff = false;\r\n            game.emit(\"chubing\", bing, this.bingPos, data);\r\n        }\r\n    },\r\n});\r\n"]}