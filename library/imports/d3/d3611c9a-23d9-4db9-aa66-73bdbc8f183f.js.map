{"version":3,"sources":["assets\\Script\\fire\\fire.js"],"names":["PoolComponent","require","cc","Class","properties","onLoad","unuse","reuse","data","init","_isinit","aniNames","node","angle","hd","Math","PI","speedX","cos","width","speedY","sin","x","v","y","animation","getComponent","Animation","indexOf","aniName","spriteFrames","game","gameUtils","getSpriteFrames","bullet_atlas","clip","AnimationClip","createWithSpriteFrames","push","name","wrapMode","WrapMode","Normal","addClip","playAdditive","once","pool","put","removeFromParent","destroy","bind","start","onDestroy"],"mappings":";;;;;;AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B,EAA8C;;;AAC9CC,EAAE,CAACC,KAAH,CAAS;AACL,aAASH,aADJ;AAELI,EAAAA,UAAU,EAAE,EAFP;AAGLC,EAAAA,MAHK,oBAGI,CACR,CAJI;AAKL;AACAC,EAAAA,KAAK,EAAE,iBAAY,CAClB,CAPI;AAQL;AACAC,EAAAA,KAAK,EAAE,eAAUC,IAAV,EAAgB;AACnB,SAAKC,IAAL,CAAUD,IAAV;AACH,GAXI;AAYL;AACAC,EAAAA,IAbK,gBAaAD,IAbA,EAaM;AACP,QAAI,CAAC,KAAKE,OAAV,EAAmB;AACf,WAAKA,OAAL,GAAe,IAAf;AACA,WAAKC,QAAL,GAAgB,EAAhB;AACH;;AACD,SAAKC,IAAL,CAAUC,KAAV,GAAkBL,IAAI,CAACK,KAAvB;AACA,QAAIC,EAAE,GAAG,KAAKF,IAAL,CAAUC,KAAV,GAAkBE,IAAI,CAACC,EAAvB,GAA4B,GAArC;AACA,SAAKC,MAAL,GAAcF,IAAI,CAACG,GAAL,CAASJ,EAAT,IAAe,KAAKF,IAAL,CAAUO,KAAzB,GAAiC,CAA/C;AACA,SAAKC,MAAL,GAAcL,IAAI,CAACM,GAAL,CAASP,EAAT,IAAe,KAAKF,IAAL,CAAUO,KAAzB,GAAiC,CAA/C;AACA,SAAKP,IAAL,CAAUU,CAAV,GAAcd,IAAI,CAACe,CAAL,CAAOD,CAAP,GAAW,KAAKL,MAA9B;AACA,SAAKL,IAAL,CAAUY,CAAV,GAAchB,IAAI,CAACe,CAAL,CAAOC,CAAP,GAAW,KAAKJ,MAA9B;AACA,QAAIK,SAAS,GAAG,KAAKb,IAAL,CAAUc,YAAV,CAAuBxB,EAAE,CAACyB,SAA1B,CAAhB,CAXO,CAW8C;;AACrD,QAAI,KAAKhB,QAAL,CAAciB,OAAd,CAAsBpB,IAAI,CAACqB,OAA3B,IAAsC,CAA1C,EAA6C;AACzC,UAAIC,YAAY,GAAGC,IAAI,CAACC,SAAL,CAAeC,eAAf,CAA+BF,IAAI,CAACG,YAApC,EAAkD1B,IAAI,CAACqB,OAAvD,CAAnB;AACA,UAAIM,IAAI,GAAGjC,EAAE,CAACkC,aAAH,CAAiBC,sBAAjB,CAAwCP,YAAxC,EAAsD,EAAtD,CAAX;AACA,WAAKnB,QAAL,CAAc2B,IAAd,CAAmB9B,IAAI,CAACqB,OAAxB;AACAM,MAAAA,IAAI,CAACI,IAAL,GAAY/B,IAAI,CAACqB,OAAjB;AACAM,MAAAA,IAAI,CAACK,QAAL,GAAgBtC,EAAE,CAACuC,QAAH,CAAYC,MAA5B;AACAjB,MAAAA,SAAS,CAACkB,OAAV,CAAkBR,IAAlB;AACH;;AACDV,IAAAA,SAAS,CAACmB,YAAV,CAAuBpC,IAAI,CAACqB,OAA5B,EAAqC,CAArC;AACAJ,IAAAA,SAAS,CAACoB,IAAV,CAAe,UAAf,EAA2B,YAAY;AACnC,UAAIC,IAAI,GAAG,KAAKlC,IAAL,CAAUkC,IAArB;;AACA,UAAIA,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACC,GAAL,CAAS,KAAKnC,IAAd;AACH,OAFD,MAGK;AACD,aAAKA,IAAL,CAAUoC,gBAAV,CAA2B,IAA3B;AACA,aAAKpC,IAAL,CAAUqC,OAAV;AACH;AACJ,KAT0B,CASzBC,IATyB,CASpB,IAToB,CAA3B;AAUH,GA5CI;AA6CLC,EAAAA,KA7CK,mBA6CG,CACP,CA9CI;AA+CLC,EAAAA,SA/CK,uBA+CO,CACX;AAhDI,CAAT","sourceRoot":"/","sourcesContent":["let PoolComponent = require(\"PoolComponent\"); //池子组件\r\ncc.Class({\r\n    extends: PoolComponent,\r\n    properties: {},\r\n    onLoad() {\r\n    },\r\n    //回收\r\n    unuse: function () {\r\n    },\r\n    //重用\r\n    reuse: function (data) {\r\n        this.init(data);\r\n    },\r\n    //开火动画\r\n    init(data) {\r\n        if (!this._isinit) {\r\n            this._isinit = true;\r\n            this.aniNames = [];\r\n        }\r\n        this.node.angle = data.angle;\r\n        let hd = this.node.angle * Math.PI / 180;\r\n        this.speedX = Math.cos(hd) * this.node.width / 2;\r\n        this.speedY = Math.sin(hd) * this.node.width / 2;\r\n        this.node.x = data.v.x + this.speedX;\r\n        this.node.y = data.v.y + this.speedY;\r\n        let animation = this.node.getComponent(cc.Animation);//动画组件\r\n        if (this.aniNames.indexOf(data.aniName) < 0) {\r\n            let spriteFrames = game.gameUtils.getSpriteFrames(game.bullet_atlas, data.aniName);\r\n            let clip = cc.AnimationClip.createWithSpriteFrames(spriteFrames, 40);\r\n            this.aniNames.push(data.aniName);\r\n            clip.name = data.aniName;\r\n            clip.wrapMode = cc.WrapMode.Normal;\r\n            animation.addClip(clip);\r\n        }\r\n        animation.playAdditive(data.aniName, 0);\r\n        animation.once(\"finished\", function () {\r\n            var pool = this.node.pool;\r\n            if (pool) {\r\n                pool.put(this.node);\r\n            }\r\n            else {\r\n                this.node.removeFromParent(true);\r\n                this.node.destroy();\r\n            }\r\n        }.bind(this));\r\n    },\r\n    start() {\r\n    },\r\n    onDestroy() {\r\n    }\r\n});\r\n"]}