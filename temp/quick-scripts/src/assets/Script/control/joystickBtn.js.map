{"version":3,"sources":["assets\\Script\\control\\joystickBtn.js"],"names":["cc","Class","Component","properties","onEnable","node","on","Node","EventType","TOUCH_START","_onTouchStart","TOUCH_MOVE","_onTouchMove","TOUCH_END","_onTouchEnd","TOUCH_CANCEL","onDisable","off","e","_isTouch","pos","getLocation","jPos","convertToNodeSpaceAR","x","key_down","game","gameControl","right","left","key_up","control","emit"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {},\r\n    // LIFE-CYCLE CALLBACKS:\r\n    // onLoad () {},\r\n    onEnable() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this._onTouchStart, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this._onTouchMove, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this._onTouchEnd, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this._onTouchEnd, this);\r\n    },\r\n    onDisable() {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this._onTouchStart, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this._onTouchMove, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END, this._onTouchEnd, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this._onTouchEnd, this);\r\n    },\r\n    _onTouchStart(e) {\r\n        this._isTouch = true;\r\n        var pos = e.getLocation();\r\n        var jPos = this.node.convertToNodeSpaceAR(pos);\r\n        if (jPos.x > 0) {\r\n            this.key_down(game.gameControl.right)\r\n        }\r\n        else {\r\n            this.key_down(game.gameControl.left)\r\n        }\r\n        //cc.log(\"_onTouchStart\", pos.x, jPos.x);\r\n    },\r\n    _onTouchMove(e) {\r\n        //cc.log(\"_onTouchMove\", this._isTouch);\r\n        if (!this._isTouch)\r\n            return;\r\n        var pos = e.getLocation();\r\n        var jPos = this.node.convertToNodeSpaceAR(pos);\r\n        if (jPos.x > 0) {\r\n            this.key_down(game.gameControl.right)\r\n        }\r\n        else {\r\n            this.key_down(game.gameControl.left)\r\n        }\r\n    },\r\n    _onTouchEnd(e) {\r\n        this._isTouch = false;\r\n        var pos = e.getLocation();\r\n        var jPos = this.node.convertToNodeSpaceAR(pos);\r\n        if (jPos.x > 0) {\r\n            this.key_up(game.gameControl.right)\r\n        }\r\n        else {\r\n            this.key_up(game.gameControl.left)\r\n        }\r\n    },\r\n    key_down(control) {\r\n        if (this.control == control) return;\r\n        if (this.control) {\r\n            this.key_up(this.control);\r\n        }\r\n        this.control = control;\r\n        game.emit(\"key_down\", control);\r\n    },\r\n    key_up(control) {\r\n        this.control = 0;\r\n        game.emit(\"key_up\", control);\r\n    },\r\n});\r\n"]}