{"version":3,"sources":["assets\\Script\\bullet\\bullet2.js"],"names":["PoolComponent","require","cc","Class","properties","onLoad","unuse","reuse","data","game","soundManager","playEffect","gameSound","qing_xing_qiang_jie1","init","group","node","angle","hd","Math","PI","speedX","cos","width","speedY","sin","x","v","y","animation","getComponent","Animation","_isInit","spriteFrames","gameUtils","getSpriteFrames","bullet_atlas","clip","AnimationClip","createWithSpriteFrames","name","wrapMode","WrapMode","Normal","addClip","playAdditive","once","pool","put","removeFromParent","destroy","bind","start","onDestroy"],"mappings":";;;;;;AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B,EAA8C;;;AAC9CC,EAAE,CAACC,KAAH,CAAS;AACL,aAASH,aADJ;AAELI,EAAAA,UAAU,EAAE,EAFP;AAGLC,EAAAA,MAHK,oBAGI,CACR,CAJI;AAKL;AACAC,EAAAA,KAAK,EAAE,iBAAY,CAClB,CAPI;AAQL;AACAC,EAAAA,KAAK,EAAE,eAAUC,IAAV,EAAgB;AACnBC,IAAAA,IAAI,CAACC,YAAL,CAAkBC,UAAlB,CAA6BF,IAAI,CAACG,SAAL,CAAeC,oBAA5C,EAAiE,KAAjE;AACA,SAAKC,IAAL,CAAUN,IAAV;AACH,GAZI;AAaLM,EAAAA,IAbK,gBAaAN,IAbA,EAaM;AACP,QAAIA,IAAI,CAACO,KAAT,EAAgB,KAAKC,IAAL,CAAUD,KAAV,GAAkBP,IAAI,CAACO,KAAvB;AAChB,SAAKC,IAAL,CAAUC,KAAV,GAAkBT,IAAI,CAACS,KAAvB;AACA,QAAIC,EAAE,GAAG,KAAKF,IAAL,CAAUC,KAAV,GAAkBE,IAAI,CAACC,EAAvB,GAA4B,GAArC;AACA,SAAKC,MAAL,GAAcF,IAAI,CAACG,GAAL,CAASJ,EAAT,IAAe,KAAKF,IAAL,CAAUO,KAAzB,GAAiC,CAA/C;AACA,SAAKC,MAAL,GAAcL,IAAI,CAACM,GAAL,CAASP,EAAT,IAAe,KAAKF,IAAL,CAAUO,KAAzB,GAAiC,CAA/C;AACA,SAAKP,IAAL,CAAUU,CAAV,GAAclB,IAAI,CAACmB,CAAL,CAAOD,CAAP,GAAW,KAAKL,MAA9B;AACA,SAAKL,IAAL,CAAUY,CAAV,GAAcpB,IAAI,CAACmB,CAAL,CAAOC,CAAP,GAAW,KAAKJ,MAA9B;AACA,QAAIK,SAAS,GAAG,KAAKb,IAAL,CAAUc,YAAV,CAAuB5B,EAAE,CAAC6B,SAA1B,CAAhB,CARO,CAQ8C;;AACrD,QAAI,CAAC,KAAKC,OAAV,EAAmB;AACf,UAAIC,YAAY,GAAGxB,IAAI,CAACyB,SAAL,CAAeC,eAAf,CAA+B1B,IAAI,CAAC2B,YAApC,EAAkD,SAAlD,CAAnB;AACA,UAAIC,IAAI,GAAGnC,EAAE,CAACoC,aAAH,CAAiBC,sBAAjB,CAAwCN,YAAxC,EAAsD,EAAtD,CAAX;AACAI,MAAAA,IAAI,CAACG,IAAL,GAAY,OAAZ;AACAH,MAAAA,IAAI,CAACI,QAAL,GAAgBvC,EAAE,CAACwC,QAAH,CAAYC,MAA5B;AACAd,MAAAA,SAAS,CAACe,OAAV,CAAkBP,IAAlB;AACA,WAAKL,OAAL,GAAe,IAAf;AACH;;AACDH,IAAAA,SAAS,CAACgB,YAAV,CAAuB,OAAvB,EAAgC,CAAhC;AACAhB,IAAAA,SAAS,CAACiB,IAAV,CAAe,UAAf,EAA2B,YAAY;AACnC,UAAIC,IAAI,GAAG,KAAK/B,IAAL,CAAU+B,IAArB;;AACA,UAAIA,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAACC,GAAL,CAAS,KAAKhC,IAAd;AACH,OAFD,MAGK;AACD,aAAKA,IAAL,CAAUiC,gBAAV,CAA2B,IAA3B;AACA,aAAKjC,IAAL,CAAUkC,OAAV;AACH;AACJ,KAT0B,CASzBC,IATyB,CASpB,IAToB,CAA3B;AAUH,GAzCI;AA0CLC,EAAAA,KA1CK,mBA0CG,CACP,CA3CI;AA4CLC,EAAAA,SA5CK,uBA4CO,CACX,CA7CI,CA8CL;;AA9CK,CAAT","sourceRoot":"/","sourcesContent":["let PoolComponent = require(\"PoolComponent\"); //池子组件\r\ncc.Class({\r\n    extends: PoolComponent,\r\n    properties: {},\r\n    onLoad() {\r\n    },\r\n    //回收\r\n    unuse: function () {\r\n    },\r\n    //重用\r\n    reuse: function (data) {\r\n        game.soundManager.playEffect(game.gameSound.qing_xing_qiang_jie1,false);\r\n        this.init(data);\r\n    },\r\n    init(data) {\r\n        if (data.group) this.node.group = data.group;\r\n        this.node.angle = data.angle;\r\n        let hd = this.node.angle * Math.PI / 180;\r\n        this.speedX = Math.cos(hd) * this.node.width / 2;\r\n        this.speedY = Math.sin(hd) * this.node.width / 2;\r\n        this.node.x = data.v.x + this.speedX;\r\n        this.node.y = data.v.y + this.speedY;\r\n        let animation = this.node.getComponent(cc.Animation);//动画组件\r\n        if (!this._isInit) {\r\n            let spriteFrames = game.gameUtils.getSpriteFrames(game.bullet_atlas, \"bullet2\");\r\n            let clip = cc.AnimationClip.createWithSpriteFrames(spriteFrames, 20);\r\n            clip.name = 'start';\r\n            clip.wrapMode = cc.WrapMode.Normal;\r\n            animation.addClip(clip);\r\n            this._isInit = true;\r\n        }\r\n        animation.playAdditive('start', 0);\r\n        animation.once(\"finished\", function () {\r\n            let pool = this.node.pool;\r\n            if (pool) {\r\n                pool.put(this.node);\r\n            }\r\n            else {\r\n                this.node.removeFromParent(true);\r\n                this.node.destroy();\r\n            }\r\n        }.bind(this));\r\n    },\r\n    start() {\r\n    },\r\n    onDestroy() {\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}