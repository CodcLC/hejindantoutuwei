{"version":3,"sources":["assets\\Script\\core\\mapSetting.js"],"names":["cc","Class","Component","properties","floor","Node","onLoad","game","on","EVENT_ENGINE_INITED","physicsManager","director","getPhysicsManager","enabled","getCollisionManager","polygonCollider","getComponent","PolygonCollider","points","physicsPolygonCollider","PhysicsPolygonCollider","mapPoint","mapRotation","mapXList","i","p","y","push","v2","x","sort","v1","startPoint","length","endPoint","gameUtils","getRotation","start","onDestroy"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAELC,EAAAA,UAAU,EAAE;AACRC,IAAAA,KAAK,EAAEJ,EAAE,CAACK;AADF,GAFP;AAKLC,EAAAA,MALK,oBAKI;AACL,QAAI,CAAC,KAAKF,KAAV,EAAiB;AAEjBJ,IAAAA,EAAE,CAACO,IAAH,CAAQC,EAAR,CAAWR,EAAE,CAACO,IAAH,CAAQE,mBAAnB,EAAwC,YAAM;AAC1C,UAAIC,cAAc,GAAGV,EAAE,CAACW,QAAH,CAAYC,iBAAZ,EAArB;AACAF,MAAAA,cAAc,CAACG,OAAf,GAAyB,IAAzB;AACAb,MAAAA,EAAE,CAACW,QAAH,CAAYG,mBAAZ,GAAkCD,OAAlC,GAA4C,IAA5C;AACH,KAJD;AAKA,QAAIE,eAAe,GAAG,KAAKX,KAAL,CAAWY,YAAX,CAAwBhB,EAAE,CAACiB,eAA3B,CAAtB;AACA,QAAIC,MAAM,GAAGH,eAAe,CAACG,MAA7B;AACA,QAAIC,sBAAsB,GAAG,KAAKf,KAAL,CAAWY,YAAX,CAAwBhB,EAAE,CAACoB,sBAA3B,CAA7B;AACAD,IAAAA,sBAAsB,CAACD,MAAvB,GAAgCA,MAAhC;AAEA,QAAIG,QAAQ,GAAG,EAAf;AACAd,IAAAA,IAAI,CAACe,WAAL,GAAmB,EAAnB;AACAf,IAAAA,IAAI,CAACgB,QAAL,GAAgB,EAAhB;;AACA,SAAK,IAAIC,CAAT,IAAcN,MAAd,EAAsB;AAClB,UAAIO,CAAC,GAAGP,MAAM,CAACM,CAAD,CAAd;;AACA,UAAIC,CAAC,CAACC,CAAF,GAAM,EAAV,EAAc;AACVL,QAAAA,QAAQ,CAACM,IAAT,CAAc3B,EAAE,CAAC4B,EAAH,CAAMH,CAAC,CAACI,CAAR,EAAWJ,CAAC,CAACC,CAAb,CAAd;AACAnB,QAAAA,IAAI,CAACgB,QAAL,CAAcI,IAAd,CAAmBF,CAAC,CAACI,CAArB;AACH;AAEJ;;AACDtB,IAAAA,IAAI,CAACgB,QAAL,CAAcO,IAAd,CAAmB,UAAUC,EAAV,EAAcH,EAAd,EAAkB;AACjC,aAAOG,EAAE,GAAGH,EAAZ;AACH,KAFD;AAGAP,IAAAA,QAAQ,CAACS,IAAT,CAAc,UAAUC,EAAV,EAAcH,EAAd,EAAkB;AAC5B,aAAOG,EAAE,CAACF,CAAH,GAAOD,EAAE,CAACC,CAAjB;AACH,KAFD;AAGA,QAAIG,UAAU,GAAGX,QAAQ,CAAC,CAAD,CAAzB;;AACA,SAAK,IAAIG,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGH,QAAQ,CAACY,MAA7B,EAAqCT,EAAC,EAAtC,EAA0C;AACtC,UAAIU,QAAQ,GAAGb,QAAQ,CAACG,EAAD,CAAvB;AACAjB,MAAAA,IAAI,CAACe,WAAL,CAAiBK,IAAjB,CAAsBpB,IAAI,CAAC4B,SAAL,CAAeC,WAAf,CAA2BJ,UAA3B,EAAuCE,QAAvC,CAAtB;AACAF,MAAAA,UAAU,GAAGE,QAAb;AACH;AAEJ,GA1CI;AA2CLG,EAAAA,KA3CK,mBA2CG,CACP,CA5CI;AA6CLC,EAAAA,SA7CK,uBA6CO,CACX,CA9CI,CA+CL;;AA/CK,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        floor: cc.Node\r\n    },\r\n    onLoad() {\r\n        if (!this.floor) return;\r\n\r\n        cc.game.on(cc.game.EVENT_ENGINE_INITED, () => {\r\n            let physicsManager = cc.director.getPhysicsManager();\r\n            physicsManager.enabled = true;\r\n            cc.director.getCollisionManager().enabled = true;\r\n        });\r\n        let polygonCollider = this.floor.getComponent(cc.PolygonCollider);\r\n        let points = polygonCollider.points;\r\n        let physicsPolygonCollider = this.floor.getComponent(cc.PhysicsPolygonCollider);\r\n        physicsPolygonCollider.points = points;\r\n\r\n        let mapPoint = [];\r\n        game.mapRotation = [];\r\n        game.mapXList = [];\r\n        for (let i in points) {\r\n            let p = points[i];\r\n            if (p.y > 30) {\r\n                mapPoint.push(cc.v2(p.x, p.y));\r\n                game.mapXList.push(p.x);\r\n            }\r\n\r\n        }\r\n        game.mapXList.sort(function (v1, v2) {\r\n            return v1 - v2;\r\n        })\r\n        mapPoint.sort(function (v1, v2) {\r\n            return v1.x - v2.x;\r\n        })\r\n        let startPoint = mapPoint[0]\r\n        for (let i = 1; i < mapPoint.length; i++) {\r\n            var endPoint = mapPoint[i];\r\n            game.mapRotation.push(game.gameUtils.getRotation(startPoint, endPoint))\r\n            startPoint = endPoint;\r\n        }\r\n\r\n    },\r\n    start() {\r\n    },\r\n    onDestroy() {\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}