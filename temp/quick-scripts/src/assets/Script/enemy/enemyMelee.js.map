{"version":3,"sources":["assets\\Script\\enemy\\enemyMelee.js"],"names":["PoolComponent","require","cc","Class","properties","parent","Node","unuse","shooting","off","shoot_start","shoot_end","reuse","data","node","on","onCollisionEnter","other","self","isDeath","game","isOver","shoot","onCollisionStay","onCollisionExit","onDestroy","onLoad","hps","getComponentsInChildren","length","hp","onHurt","attack"],"mappings":";;;;;;AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASH,aADJ;AAELI,EAAAA,UAAU,EAAE;AACRC,IAAAA,MAAM,EAAEH,EAAE,CAACI;AADH,GAFP;AAKLC,EAAAA,KAAK,EAAE,iBAAY;AACf,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKH,MAAL,CAAYI,GAAZ,CAAgB,aAAhB,EAA+B,KAAKC,WAApC,EAAiD,IAAjD;AACA,SAAKL,MAAL,CAAYI,GAAZ,CAAgB,WAAhB,EAA6B,KAAKE,SAAlC,EAA6C,IAA7C;AACH,GATI;AAULC,EAAAA,KAAK,EAAE,eAAUC,IAAV,EAAgB;AACnB,SAAKA,IAAL,GAAYA,IAAZ;AACA,QAAI,CAAC,KAAKR,MAAV,EAAkB,KAAKA,MAAL,GAAc,KAAKS,IAAL,CAAUT,MAAxB;AAClB,SAAKA,MAAL,CAAYU,EAAZ,CAAe,aAAf,EAA8B,KAAKL,WAAnC,EAAgD,IAAhD;AACA,SAAKL,MAAL,CAAYU,EAAZ,CAAe,WAAf,EAA4B,KAAKJ,SAAjC,EAA4C,IAA5C;AACA,SAAKH,QAAL,GAAgB,KAAhB;AACH,GAhBI;AAiBL;AACAQ,EAAAA,gBAAgB,EAAE,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,QAAI,KAAKb,MAAL,CAAYc,OAAhB,EAAyB;AACzB,QAAIC,IAAI,CAACC,MAAT,EAAiB;;AACjB,QAAI,KAAKb,QAAT,EAAmB;AACf,WAAKc,KAAL,CAAWL,KAAX;AACH;AACJ,GAxBI;AAyBL;AACAM,EAAAA,eAAe,EAAE,yBAAUN,KAAV,EAAiBC,IAAjB,EAAuB;AACpC,QAAI,KAAKV,QAAT,EAAmB;AACf,WAAKc,KAAL,CAAWL,KAAX;AACH;AACJ,GA9BI;AA+BL;AACAO,EAAAA,eAAe,EAAE,yBAAUP,KAAV,EAAiBC,IAAjB,EAAuB,CACvC,CAjCI;AAkCL;AACAR,EAAAA,WAnCK,yBAmCS;AACV,SAAKF,QAAL,GAAgB,IAAhB;AACH,GArCI;AAsCL;AACAG,EAAAA,SAvCK,uBAuCO;AACR,SAAKH,QAAL,GAAgB,KAAhB;AACH,GAzCI;AA0CL;AACAiB,EAAAA,SA3CK,uBA2CO,CACX,CA5CI;AA6CLC,EAAAA,MA7CK,oBA6CI,CACR,CA9CI;AA+CLJ,EAAAA,KA/CK,iBA+CCL,KA/CD,EA+CQ;AACT,SAAKT,QAAL,GAAgB,KAAhB;AACA,QAAImB,GAAG,GAAGV,KAAK,CAACH,IAAN,CAAWc,uBAAX,CAAmC,aAAnC,CAAV;;AACA,QAAID,GAAG,IAAIA,GAAG,CAACE,MAAf,EAAuB;AACnB,UAAIC,EAAE,GAAGH,GAAG,CAAC,CAAD,CAAZ;AACAG,MAAAA,EAAE,CAACC,MAAH,CAAU,KAAKlB,IAAL,CAAUmB,MAApB;AACH;AACJ;AAtDI,CAAT","sourceRoot":"/","sourcesContent":["let PoolComponent = require(\"PoolComponent\")\r\ncc.Class({\r\n    extends: PoolComponent,\r\n    properties: {\r\n        parent: cc.Node\r\n    },\r\n    unuse: function () {\r\n        this.shooting = false;\r\n        this.parent.off(\"shoot_start\", this.shoot_start, this);\r\n        this.parent.off(\"shoot_end\", this.shoot_end, this);\r\n    },\r\n    reuse: function (data) {\r\n        this.data = data;\r\n        if (!this.parent) this.parent = this.node.parent;\r\n        this.parent.on(\"shoot_start\", this.shoot_start, this);\r\n        this.parent.on(\"shoot_end\", this.shoot_end, this);\r\n        this.shooting = false;\r\n    },\r\n    //碰撞进入\r\n    onCollisionEnter: function (other, self) {\r\n        if (this.parent.isDeath) return;\r\n        if (game.isOver) return;\r\n        if (this.shooting) {\r\n            this.shoot(other);\r\n        }\r\n    },\r\n    //碰撞停留\r\n    onCollisionStay: function (other, self) {\r\n        if (this.shooting) {\r\n            this.shoot(other);\r\n        }\r\n    },\r\n    //碰撞退出\r\n    onCollisionExit: function (other, self) {\r\n    },\r\n    //开始射击\r\n    shoot_start() {\r\n        this.shooting = true;\r\n    },\r\n    //射击动作结束\r\n    shoot_end() {\r\n        this.shooting = false;\r\n    },\r\n    //该方法为生命周期方法，父类未必会有实现。\r\n    onDestroy() {\r\n    },\r\n    onLoad() {\r\n    },\r\n    shoot(other) {\r\n        this.shooting = false;\r\n        let hps = other.node.getComponentsInChildren(\"hpComponent\");\r\n        if (hps && hps.length) {\r\n            let hp = hps[0];\r\n            hp.onHurt(this.data.attack);\r\n        }\r\n    }\r\n});\r\n"]}