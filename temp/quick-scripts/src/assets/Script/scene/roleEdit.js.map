{"version":3,"sources":["assets\\Script\\scene\\roleEdit.js"],"names":["track","cc","Enum","idle","run","attack1","attack2","jump","Class","Component","properties","sp","Skeleton","onLoad","data","_skeleton","opts","i","animations","animation","log","duration","name","trackIndex","ra1","ra2","setMix","setAnimation","anim1","anim2","mixTime","onMove","clearTrack","addAnimation","onAim","onAttack1","onAttack2","onjump","switchSkin","onClick","event"],"mappings":"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","sourceRoot":"/","sourcesContent":["var track = cc.Enum({\r\n    idle: 1,\r\n    run: 2,\r\n    attack1: 3,\r\n    attack2: 4,\r\n    jump: 5\r\n});\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        sp: sp.Skeleton\r\n    },\r\n    onLoad() {\r\n        this.data = this.sp._skeleton.data; // SkeletonData 骨架数据、\r\n        var opts = {}\r\n        for (var i in this.data.animations) {\r\n            var animation = this.data.animations[i];\r\n            cc.log(animation);\r\n            cc.log(animation.duration * 30);\r\n            opts[animation.name] = animation.duration;\r\n        }\r\n        this.trackIndex = track.idle;\r\n        //this.sp.timeScale = 0.5;\r\n        var ra1 = this.animations.run.duration > this.animations.attack1.duration ? this.animations.attack1.duration : this.animations.run.duration;\r\n        var ra2 = this.animations.run.duration > this.animations.attack2.duration ? this.animations.attack2.duration : this.animations.run.duration;\r\n        this.setMix('run', 'attack2', ra1 - 0.1);\r\n        this.setMix('run', 'attack1', ra2 - 0.1);\r\n        this.sp.setAnimation(track.run, \"run\", true);\r\n    },\r\n    //setMix 为所有关键帧设定混合及混合时间（从当前值开始差值）。\r\n    setMix(anim1, anim2, mixTime) {\r\n        this.sp.setMix(anim1, anim2, mixTime);\r\n        this.sp.setMix(anim2, anim1, mixTime);\r\n    },\r\n    /********\r\n     * 移动\r\n     * **/\r\n    onMove() {\r\n        this.sp.clearTrack(this.trackIndex);\r\n        this.trackIndex = track.run;\r\n        this.sp.addAnimation(track.run, \"run\", true, 0.1);\r\n    },\r\n    /********\r\n     * 瞄准\r\n     * ***/\r\n    onAim() {\r\n    },\r\n    /********\r\n     * 攻击\r\n     * ***/\r\n    onAttack1() {\r\n        cc.log(\"攻击1\");\r\n        // this.sp.clearTrack(this.trackIndex);\r\n        // this.trackIndex = track.attack1;\r\n        this.sp.addAnimation(track.attack1, \"attack1\", false, 0);\r\n    },\r\n    onAttack2() {\r\n        cc.log(\"攻击2\");\r\n        // this.sp.timeScale = 1;\r\n        // this.sp.clearTrack(this.trackIndex);\r\n        // this.trackIndex = track.attack2;\r\n        this.sp.addAnimation(track.attack2, \"attack2\", false, 0);\r\n    },\r\n    onjump() {\r\n        cc.log(\"跳跃\");\r\n        this.sp.clearTrack(this.trackIndex);\r\n        this.trackIndex = track.jump;\r\n        this.sp.addAnimation(track.jump, \"jump\", false, 0.2);\r\n    },\r\n    /***\r\n     * 更换皮肤\r\n     *\r\n     * ****/\r\n    switchSkin() {\r\n    },\r\n    /*****\r\n     *\r\n     * ******/\r\n    onClick(event) {\r\n    },\r\n});\r\n"]}