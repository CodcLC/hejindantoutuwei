
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/core/hua.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9caccE8s4VKs6or46aoiP8o', 'hua');
// Script/core/hua.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    huaValue: 100,
    huaLevel: 1
  },
  onDestroy: function onDestroy() {},
  onLoad: function onLoad() {
    this.updateHua();
  },
  setHua: function setHua(value) {
    this.huaValue = value;
    this.updateHua();
  },
  updateHua: function updateHua() {
    var hueValue = Math.PI * 2 * this.huaValue / 255;
    var mat = this.hueMatrix(hueValue);
    var red = cc.v4(mat[0][0], mat[0][1], mat[0][2], 1);
    var green = cc.v4(mat[1][0], mat[1][1], mat[1][2], 1);
    var blue = cc.v4(mat[2][0], mat[2][1], mat[2][2], 1);
    var renderComponents = this.node.getComponents(cc.RenderComponent);
    var renderComponent = renderComponents[0];
    var material = renderComponent.getMaterial(0);
    var isLua = material.name.indexOf("hua") >= 0;

    if (isLua) {
      material.setProperty("red", red);
      material.setProperty("green", green);
      material.setProperty("blue", blue);
      material.setProperty("huaLevel", this.huaLevel);
    }
  },
  xRotateMat: function xRotateMat(mat, rs, rc) {
    mat[0][0] = 1.0;
    mat[0][1] = 0.0;
    mat[0][2] = 0.0;
    mat[1][0] = 0.0;
    mat[1][1] = rc;
    mat[1][2] = rs;
    mat[2][0] = 0.0;
    mat[2][1] = -rs;
    mat[2][2] = rc;
  },
  yRotateMat: function yRotateMat(mat, rs, rc) {
    mat[0][0] = rc;
    mat[0][1] = 0.0;
    mat[0][2] = -rs;
    mat[1][0] = 0.0;
    mat[1][1] = 1.0;
    mat[1][2] = 0.0;
    mat[2][0] = rs;
    mat[2][1] = 0.0;
    mat[2][2] = rc;
  },
  zRotateMat: function zRotateMat(mat, rs, rc) {
    mat[0][0] = rc;
    mat[0][1] = rs;
    mat[0][2] = 0.0;
    mat[1][0] = -rs;
    mat[1][1] = rc;
    mat[1][2] = 0.0;
    mat[2][0] = 0.0;
    mat[2][1] = 0.0;
    mat[2][2] = 1.0;
  },
  matrixMult: function matrixMult(a, b, c) {
    var x, y;
    var temp = [];

    for (y = 0; y < 3; y++) {
      temp[y] = [];

      for (x = 0; x < 3; x++) {
        temp[y][x] = b[y][0] * a[0][x] + b[y][1] * a[1][x] + b[y][2] * a[2][x];
      }
    }

    for (y = 0; y < 3; y++) {
      for (x = 0; x < 3; x++) {
        c[y][x] = temp[y][x];
      }
    }
  },
  mat1000: function mat1000(mat) {
    for (var i = 0; i < mat.length; i++) {
      for (var j = 0; j < mat[i].length; j++) {
        var temp = mat[i][j];
        mat[i][j] = temp * 1000;
      }
    }
  },
  //色调矩阵
  hueMatrix: function hueMatrix(hue) {
    var mat = [];
    mat[0] = [];
    mat[1] = [];
    mat[2] = [];
    var rot = [];
    rot[0] = [];
    rot[1] = [];
    rot[2] = [];
    var seq2 = Math.sqrt(2);
    var seq3 = Math.sqrt(3);
    var mag, xrs, xrc, yrs, yrc, zrs, zrc;
    mag = seq2;
    xrs = 1.0 / mag;
    xrc = 1.0 / mag;
    this.xRotateMat(mat, xrs, xrc);
    mag = seq3;
    yrs = -1.0 / mag;
    yrc = seq2 / mag;
    this.yRotateMat(rot, yrs, yrc);
    this.matrixMult(rot, mat, mat);
    zrs = Math.sin(hue);
    zrc = Math.cos(hue);
    this.zRotateMat(rot, zrs, zrc);
    this.matrixMult(rot, mat, mat);
    this.yRotateMat(rot, -yrs, yrc);
    this.matrixMult(rot, mat, mat);
    this.xRotateMat(rot, -xrs, xrc);
    this.matrixMult(rot, mat, mat);
    return mat;
  },
  start: function start() {} // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxjb3JlXFxodWEuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJodWFWYWx1ZSIsImh1YUxldmVsIiwib25EZXN0cm95Iiwib25Mb2FkIiwidXBkYXRlSHVhIiwic2V0SHVhIiwidmFsdWUiLCJodWVWYWx1ZSIsIk1hdGgiLCJQSSIsIm1hdCIsImh1ZU1hdHJpeCIsInJlZCIsInY0IiwiZ3JlZW4iLCJibHVlIiwicmVuZGVyQ29tcG9uZW50cyIsIm5vZGUiLCJnZXRDb21wb25lbnRzIiwiUmVuZGVyQ29tcG9uZW50IiwicmVuZGVyQ29tcG9uZW50IiwibWF0ZXJpYWwiLCJnZXRNYXRlcmlhbCIsImlzTHVhIiwibmFtZSIsImluZGV4T2YiLCJzZXRQcm9wZXJ0eSIsInhSb3RhdGVNYXQiLCJycyIsInJjIiwieVJvdGF0ZU1hdCIsInpSb3RhdGVNYXQiLCJtYXRyaXhNdWx0IiwiYSIsImIiLCJjIiwieCIsInkiLCJ0ZW1wIiwibWF0MTAwMCIsImkiLCJsZW5ndGgiLCJqIiwiaHVlIiwicm90Iiwic2VxMiIsInNxcnQiLCJzZXEzIiwibWFnIiwieHJzIiwieHJjIiwieXJzIiwieXJjIiwienJzIiwienJjIiwic2luIiwiY29zIiwic3RhcnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBRUxDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxRQUFRLEVBQUUsR0FERjtBQUVSQyxJQUFBQSxRQUFRLEVBQUU7QUFGRixHQUZQO0FBTUxDLEVBQUFBLFNBTkssdUJBTU8sQ0FDWCxDQVBJO0FBUUxDLEVBQUFBLE1BUkssb0JBUUk7QUFDTCxTQUFLQyxTQUFMO0FBQ0gsR0FWSTtBQVdMQyxFQUFBQSxNQVhLLGtCQVdFQyxLQVhGLEVBV1M7QUFDVixTQUFLTixRQUFMLEdBQWdCTSxL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QUEzQjtBQUNBLFNBQUtwQixVQUFMLENBQWdCWSxHQUFoQixFQUFxQmxDLEdBQXJCLEVBQTBCQSxHQUExQjtBQUNBLFNBQUtpQixVQUFMLENBQWdCaUIsR0FBaEIsRUFBcUIsQ0FBQ0ssR0FBdEIsRUFBMkJDLEdBQTNCO0FBQ0EsU0FBS2xCLFVBQUwsQ0FBZ0JZLEdBQWhCLEVBQXFCbEMsR0FBckIsRUFBMEJBLEdBQTFCO0FBQ0EsV0FBT0EsR0FBUDtBQUNILEdBdkhJO0FBd0hMK0MsRUFBQUEsS0F4SEssbUJBd0hHLENBQ1AsQ0F6SEksQ0EwSFQ7O0FBMUhTLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBodWFWYWx1ZTogMTAwLFxyXG4gICAgICAgIGh1YUxldmVsOiAxXHJcbiAgICB9LFxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgfSxcclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUh1YSgpO1xyXG4gICAgfSxcclxuICAgIHNldEh1YSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuaHVhVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUh1YSgpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZUh1YSgpIHtcclxuICAgICAgICBsZXQgaHVlVmFsdWUgPSBNYXRoLlBJICogMiAqIHRoaXMuaHVhVmFsdWUgLyAyNTU7XHJcbiAgICAgICAgbGV0IG1hdCA9IHRoaXMuaHVlTWF0cml4KGh1ZVZhbHVlKTtcclxuICAgICAgICBsZXQgcmVkID0gY2MudjQobWF0WzBdWzBdLCBtYXRbMF1bMV0sIG1hdFswXVsyXSwgMSk7XHJcbiAgICAgICAgbGV0IGdyZWVuID0gY2MudjQobWF0WzFdWzBdLCBtYXRbMV1bMV0sIG1hdFsxXVsyXSwgMSk7XHJcbiAgICAgICAgbGV0IGJsdWUgPSBjYy52NChtYXRbMl1bMF0sIG1hdFsyXVsxXSwgbWF0WzJdWzJdLCAxKTtcclxuICAgICAgICBsZXQgcmVuZGVyQ29tcG9uZW50cyA9IHRoaXMubm9kZS5nZXRDb21wb25lbnRzKGNjLlJlbmRlckNvbXBvbmVudCk7XHJcbiAgICAgICAgbGV0IHJlbmRlckNvbXBvbmVudCA9IHJlbmRlckNvbXBvbmVudHNbMF07XHJcbiAgICAgICAgbGV0IG1hdGVyaWFsID0gcmVuZGVyQ29tcG9uZW50LmdldE1hdGVyaWFsKDApO1xyXG4gICAgICAgIGxldCBpc0x1YSA9IChtYXRlcmlhbC5uYW1lLmluZGV4T2YoXCJodWFcIikgPj0gMClcclxuICAgICAgICBpZiAoaXNMdWEpIHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UHJvcGVydHkoXCJyZWRcIiwgcmVkKTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UHJvcGVydHkoXCJncmVlblwiLCBncmVlbik7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldFByb3BlcnR5KFwiYmx1ZVwiLCBibHVlKTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0UHJvcGVydHkoXCJodWFMZXZlbFwiLCB0aGlzLmh1YUxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgeFJvdGF0ZU1hdDogZnVuY3Rpb24gKG1hdCwgcnMsIHJjKSB7XHJcbiAgICAgICAgbWF0WzBdWzBdID0gMS4wO1xyXG4gICAgICAgIG1hdFswXVsxXSA9IDAuMDtcclxuICAgICAgICBtYXRbMF1bMl0gPSAwLjA7XHJcbiAgICAgICAgbWF0WzFdWzBdID0gMC4wO1xyXG4gICAgICAgIG1hdFsxXVsxXSA9IHJjO1xyXG4gICAgICAgIG1hdFsxXVsyXSA9IHJzO1xyXG4gICAgICAgIG1hdFsyXVswXSA9IDAuMDtcclxuICAgICAgICBtYXRbMl1bMV0gPSAtcnM7XHJcbiAgICAgICAgbWF0WzJdWzJdID0gcmM7XHJcbiAgICB9LFxyXG4gICAgeVJvdGF0ZU1hdDogZnVuY3Rpb24gKG1hdCwgcnMsIHJjKSB7XHJcbiAgICAgICAgbWF0WzBdWzBdID0gcmM7XHJcbiAgICAgICAgbWF0WzBdWzFdID0gMC4wO1xyXG4gICAgICAgIG1hdFswXVsyXSA9IC1ycztcclxuICAgICAgICBtYXRbMV1bMF0gPSAwLjA7XHJcbiAgICAgICAgbWF0WzFdWzFdID0gMS4wO1xyXG4gICAgICAgIG1hdFsxXVsyXSA9IDAuMDtcclxuICAgICAgICBtYXRbMl1bMF0gPSBycztcclxuICAgICAgICBtYXRbMl1bMV0gPSAwLjA7XHJcbiAgICAgICAgbWF0WzJdWzJdID0gcmM7XHJcbiAgICB9LFxyXG4gICAgelJvdGF0ZU1hdDogZnVuY3Rpb24gKG1hdCwgcnMsIHJjKSB7XHJcbiAgICAgICAgbWF0WzBdWzBdID0gcmM7XHJcbiAgICAgICAgbWF0WzBdWzFdID0gcnM7XHJcbiAgICAgICAgbWF0WzBdWzJdID0gMC4wO1xyXG4gICAgICAgIG1hdFsxXVswXSA9IC1ycztcclxuICAgICAgICBtYXRbMV1bMV0gPSByYztcclxuICAgICAgICBtYXRbMV1bMl0gPSAwLjA7XHJcbiAgICAgICAgbWF0WzJdWzBdID0gMC4wO1xyXG4gICAgICAgIG1hdFsyXVsxXSA9IDAuMDtcclxuICAgICAgICBtYXRbMl1bMl0gPSAxLjA7XHJcbiAgICB9LFxyXG4gICAgbWF0cml4TXVsdDogZnVuY3Rpb24gKGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgeCwgeTtcclxuICAgICAgICB2YXIgdGVtcCA9IFtdO1xyXG4gICAgICAgIGZvciAoeSA9IDA7IHkgPCAzOyB5KyspIHtcclxuICAgICAgICAgICAgdGVtcFt5XSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHggPSAwOyB4IDwgMzsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wW3ldW3hdID0gYlt5XVswXSAqIGFbMF1beF0gKyBiW3ldWzFdICogYVsxXVt4XSArIGJbeV1bMl0gKiBhWzJdW3hdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoeSA9IDA7IHkgPCAzOyB5KyspIHtcclxuICAgICAgICAgICAgZm9yICh4ID0gMDsgeCA8IDM7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgY1t5XVt4XSA9IHRlbXBbeV1beF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWF0MTAwMDogZnVuY3Rpb24gKG1hdCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWF0W2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG1hdFtpXVtqXTtcclxuICAgICAgICAgICAgICAgIG1hdFtpXVtqXSA9IHRlbXAgKiAxMDAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6Imy6LCD55+p6Zi1XHJcbiAgICBodWVNYXRyaXg6IGZ1bmN0aW9uIChodWUpIHtcclxuICAgICAgICB2YXIgbWF0ID0gW107XHJcbiAgICAgICAgbWF0WzBdID0gW107XHJcbiAgICAgICAgbWF0WzFdID0gW107XHJcbiAgICAgICAgbWF0WzJdID0gW107XHJcbiAgICAgICAgdmFyIHJvdCA9IFtdO1xyXG4gICAgICAgIHJvdFswXSA9IFtdO1xyXG4gICAgICAgIHJvdFsxXSA9IFtdO1xyXG4gICAgICAgIHJvdFsyXSA9IFtdO1xyXG4gICAgICAgIHZhciBzZXEyID0gTWF0aC5zcXJ0KDIpO1xyXG4gICAgICAgIHZhciBzZXEzID0gTWF0aC5zcXJ0KDMpO1xyXG4gICAgICAgIHZhciBtYWcsIHhycywgeHJjLCB5cnMsIHlyYywgenJzLCB6cmM7XHJcbiAgICAgICAgbWFnID0gc2VxMjtcclxuICAgICAgICB4cnMgPSAxLjAgLyBtYWc7XHJcbiAgICAgICAgeHJjID0gMS4wIC8gbWFnO1xyXG4gICAgICAgIHRoaXMueFJvdGF0ZU1hdChtYXQsIHhycywgeHJjKTtcclxuICAgICAgICBtYWcgPSBzZXEzO1xyXG4gICAgICAgIHlycyA9IC0xLjAgLyBtYWc7XHJcbiAgICAgICAgeXJjID0gc2VxMiAvIG1hZztcclxuICAgICAgICB0aGlzLnlSb3RhdGVNYXQocm90LCB5cnMsIHlyYyk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhNdWx0KHJvdCwgbWF0LCBtYXQpO1xyXG4gICAgICAgIHpycyA9IE1hdGguc2luKGh1ZSk7XHJcbiAgICAgICAgenJjID0gTWF0aC5jb3MoaHVlKTtcclxuICAgICAgICB0aGlzLnpSb3RhdGVNYXQocm90LCB6cnMsIHpyYyk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhNdWx0KHJvdCwgbWF0LCBtYXQpO1xyXG4gICAgICAgIHRoaXMueVJvdGF0ZU1hdChyb3QsIC15cnMsIHlyYyk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhNdWx0KHJvdCwgbWF0LCBtYXQpO1xyXG4gICAgICAgIHRoaXMueFJvdGF0ZU1hdChyb3QsIC14cnMsIHhyYyk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhNdWx0KHJvdCwgbWF0LCBtYXQpO1xyXG4gICAgICAgIHJldHVybiBtYXQ7XHJcbiAgICB9LFxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICB9LFxyXG4vLyB1cGRhdGUgKGR0KSB7fSxcclxufSlcclxuO1xyXG4iXX0=